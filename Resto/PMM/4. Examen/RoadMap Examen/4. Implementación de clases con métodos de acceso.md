> Este punto trata sobre **cÃ³mo organizar el cÃ³digo para acceder a los datos de forma estructurada y eficiente**.

Cuando usamos **bases de datos** (como Room) o **DataStore** en Android, necesitamos **clases que actÃºen como intermediarias** entre la fuente de datos y el resto de la app.

ğŸ“Œ **Ejemplo:**  
Imagina que tienes una **biblioteca** y quieres saber quÃ© libros hay disponibles.

- **La base de datos** es la estanterÃ­a con los libros.
- **El DAO** (Data Access Object) es el bibliotecario, que te dice quÃ© libros hay.
- **La clase de acceso (Repository o ViewModel)** es la persona que te lleva el libro a tu mesa.

---

### **ğŸ“Œ Ejemplo sencillo con Room**

ğŸ“‚ `UserRepository.kt`

```kotlin
class UserRepository(private val userDao: UserDao) {

    suspend fun insert(user: User) {
        userDao.insert(user)
    }

    suspend fun getAllUsers(): List<User> {
        return userDao.getAllUsers()
    }

    suspend fun getUserById(userId: Int): User? {
        return userDao.getUserById(userId)
    }

    suspend fun deleteAllUsers() {
        userDao.deleteAllUsers()
    }
}
```

ğŸ“Œ **ExplicaciÃ³n:**  
- `UserRepository`: Proporciona mÃ©todos de alto nivel para interactuar con la base de datos.
- Encapsula la lÃ³gica de acceso a datos, lo que facilita las pruebas y el mantenimiento.

---

### **ğŸ“Œ Ejemplo sencillo con DataStore**

ğŸ“‚ `UserPreferences.kt`

```kotlin
object UserPreferences {
    private val THEME_KEY = booleanPreferencesKey("dark_mode")

    suspend fun saveTheme(context: Context, isDarkMode: Boolean) {
        context.dataStore.edit { preferences ->
            preferences[THEME_KEY] = isDarkMode
        }
    }

    fun getTheme(context: Context): Flow<Boolean> {
        return context.dataStore.data.map { preferences ->
            preferences[THEME_KEY] ?: false
        }
    }
}
```

ğŸ“Œ **ExplicaciÃ³n:**  
âœ” `saveTheme()` guarda si el modo oscuro estÃ¡ activado o no.  
âœ” `getTheme()` devuelve la preferencia del usuario como `Flow<Boolean>`.  
âœ” La `Activity` o `Fragment` solo llama a `UserPreferences`, sin acceder a `DataStore` directamente.

---

### **ğŸ“Œ Beneficios de usar clases con mÃ©todos de acceso**

âœ… **OrganizaciÃ³n** â†’ Separa la lÃ³gica de acceso a datos del cÃ³digo de la UI.  
âœ… **ReutilizaciÃ³n** â†’ Se pueden usar los mismos mÃ©todos en diferentes partes de la app.  
âœ… **FÃ¡cil mantenimiento** â†’ Si cambia la base de datos, solo actualizamos la clase de acceso, no toda la app.

ğŸ“Œ **Â¿Quieres mÃ¡s detalles sobre cÃ³mo conectar estas clases con un `ViewModel`?** ğŸš€